/*
 * main.c
 *
 *  Created on: 2 wrz 2015
 *      Author: Bartek
 */

#include <avr/io.h>
#include <util/delay.h>
#include "RTC.h"
#include "I2C.h"
#include "MKUART/mkuart.h"
int8_t temp1;
uint8_t temp2;

void SendTempUSART()
{
    uart_puts("Temperatura:  ");
    uart_putint( temp1, 10 );
    uart_puts(".");
    uart_putint( temp2, 10 );
    uart_puts("\r\n");
}



int main() {
	TWI_Init(100000/100);
	USART_Init(__UBRR);

	RTC_InitTypeDef RTC_Initialize;
	RTC_Initialize.BB_SQW = DISABLE;
	RTC_Initialize.RTC_Alarm1=Alarm1_Disable;
	RTC_Initialize.RTC_Alarm2=Alarm2_Disable;
	RTC_Initialize.RTC_Oscillator = DISABLE;
	RTC_Initialize.RTC_SQW = SQW_Disable;

	RTC_Init(&RTC_Initialize);
	RTC_Init(&RTC_Initialize);





	RTC_DateTimeTypedef DataCzas;
	DataCzas.seconds = 0;
	DataCzas.minutes = 40;
	DataCzas.hours = 23;

	RTC_GetTemp(&temp1, &temp2);
	_delay_ms(500);
	SendTempUSART();

while(1){} 
}
