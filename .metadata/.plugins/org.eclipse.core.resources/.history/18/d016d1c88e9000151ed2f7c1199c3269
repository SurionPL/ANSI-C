/*
 * main.c
 *
 *  Created on: 12 lis 2015
 *      Author: Bartek
 */

#include <avr/io.h>
#include <util/delay.h>
#include <avr/interrupt.h>
#include "BMP180/BMP180.h"
#include "I2C/I2C.h"
#include "RTC/RTC.h"
#include "MKUART/mkuart.h"
#include "HTU21D/HTU21D.h"
#include "BH1750/BH1750.h"
#include <stdio.h>


int main()
{
	uint16_t lux = 0;
	USART_Init(__UBRR);
	sei();
	TWI_Init(100000/100);
	BH1750_PowerOn();

	//BH1750_Read();
	while(1)
	{
		char natezenie[6];
		BH1750_Start(BH1750_OTLR_MODE);
		_delay_ms(300);
		lux = BH1750_Read();
		uart_puts("Natezenie: ");
		sprintf(natezenie, "%d", lux);
		//uart_putint(lux, 6);
		uart_puts("\r\n");
		_delay_ms(5000);
	}
}
