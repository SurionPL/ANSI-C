/*
 * AuxiliaryLib.c
 *
 *  Created on: 28 lis 2015
 *      Author: Bartek
 */

#include <avr/io.h>
#include <util/delay.h>

#include "AVG/AVG.h"
#include "ThingSpeak/ThingSpeak.h"
#include "MKUART/mkuart.h"
#include "HTU21D/HTU21D.h"
#include "BH1750/BH1750.h"
#include "ESP8266_CL/ESP8266_Cl.h"
#include "BMP180/BMP180.h"



void initializeModules()
{
	//ESP_Init();
	//HTU21D_Init(Humidity10b_Temperature13b);
	//BMP180_Init(BMP180_Mode_ULP);


//	RTC_InitTypeDef RTC_Struct;
//	RTC_Struct.RTC_Oscillator = DISABLE;
//	RTC_Struct.RTC_Alarm1 = Alarm1_OncePerSec;
//	RTC_Struct.RTC_Alarm2= Alarm2_OncePerMin;
//	RTC_Struct.BB_SQW = DISABLE;
//	RTC_Struct.RTC_SQW = SQW_Disable;
//	RTC_Init(&RTC_Struct);
//	RTC_AlarmTypedef RTC_AlarmStruct;
//	RTC_AlarmStruct.seconds=30;
//	RTC_SetAlarm(&RTC_AlarmStruct);
}


void sendTemperature(int8_t temperature)
{
	char value[7];
	sprintf(value, "%d", temperature);
	TS_UpdateField(value, 1);
}

void sendHumidity(uint8_t humidity)
{
	char value[7];
	sprintf(value, "%d", humidity);
	TS_UpdateField(value, 2);
}

void sendPressure(int32_t pressure)
{
	char value[7];
	sprintf(value, "%d", (int)(pressure/100));
	TS_UpdateField(value, 4);
}

void sendIlluminance(uint16_t illuminance)
{
	char value[7];
	sprintf(value, "%d", illuminance);
	TS_UpdateField(value, 4);
}

void initializeInterfaces()
{
	//TWI_Init(100000/100);
	USART_Init(__UBRR);
}



